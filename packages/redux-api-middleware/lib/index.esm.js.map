{"version":3,"file":"index.esm.js","sources":["../src/index.js"],"sourcesContent":["export default function apiClientMiddleware(client) {\n  return ({ dispatch, getState }) => next => (action) => {\n    if (action.type !== 'api') {\n      return next(action);\n    }\n\n    const { promise, types, reject, ...rest } = action;\n    const [REQUEST, SUCCESS, FAILURE] = types;\n    next({ ...rest, type: REQUEST });\n\n    return promise(client, dispatch, getState)\n      .then((response) => {\n        dispatch({\n          ...rest,\n          type: SUCCESS,\n          payload: response.data,\n          status: response.status,\n          headers: response.headers\n        });\n        return response;\n      })\n      .catch((err) => {\n        dispatch({\n          ...rest,\n          type: FAILURE,\n          error: err.response ? err.response.data : err,\n          status: err.response ? err.response.status : null,\n          headers: err.response ? err.response.headers : null\n        });\n        if (reject) throw err;\n      });\n  };\n}\n"],"names":["apiClientMiddleware","client","dispatch","getState","next","action","type","promise","types","reject","rest","REQUEST","SUCCESS","FAILURE","then","response","payload","data","status","headers","catch","err","error"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAe,SAASA,mBAAT,CAA6BC,MAA7B,EAAqC;SAC3C;QAAGC,QAAH,QAAGA,QAAH;QAAaC,QAAb,QAAaA,QAAb;WAA4B,UAAAC,IAAI;aAAI,UAACC,MAAD,EAAY;YACjDA,MAAM,CAACC,IAAP,KAAgB,KAApB,EAA2B;iBAClBF,IAAI,CAACC,MAAD,CAAX;;;YAGME,OAL6C,GAKTF,MALS,CAK7CE,OAL6C;YAKpCC,KALoC,GAKTH,MALS,CAKpCG,KALoC;YAK7BC,MAL6B,GAKTJ,MALS,CAK7BI,MAL6B;YAKlBC,IALkB,4BAKTL,MALS;;oCAMjBG,KANiB;YAM9CG,OAN8C;YAMrCC,OANqC;YAM5BC,OAN4B;;QAOrDT,IAAI,mBAAMM,IAAN;UAAYJ,IAAI,EAAEK;WAAtB;eAEOJ,OAAO,CAACN,MAAD,EAASC,QAAT,EAAmBC,QAAnB,CAAP,CACJW,IADI,CACC,UAACC,QAAD,EAAc;UAClBb,QAAQ,mBACHQ,IADG;YAENJ,IAAI,EAAEM,OAFA;YAGNI,OAAO,EAAED,QAAQ,CAACE,IAHZ;YAINC,MAAM,EAAEH,QAAQ,CAACG,MAJX;YAKNC,OAAO,EAAEJ,QAAQ,CAACI;aALpB;iBAOOJ,QAAP;SATG,EAWJK,KAXI,CAWE,UAACC,GAAD,EAAS;UACdnB,QAAQ,mBACHQ,IADG;YAENJ,IAAI,EAAEO,OAFA;YAGNS,KAAK,EAAED,GAAG,CAACN,QAAJ,GAAeM,GAAG,CAACN,QAAJ,CAAaE,IAA5B,GAAmCI,GAHpC;YAINH,MAAM,EAAEG,GAAG,CAACN,QAAJ,GAAeM,GAAG,CAACN,QAAJ,CAAaG,MAA5B,GAAqC,IAJvC;YAKNC,OAAO,EAAEE,GAAG,CAACN,QAAJ,GAAeM,GAAG,CAACN,QAAJ,CAAaI,OAA5B,GAAsC;aALjD;cAOIV,MAAJ,EAAY,MAAMY,GAAN;SAnBT,CAAP;OATqC;KAAhC;GAAP;;;;;"}